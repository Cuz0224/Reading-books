# 第二章 高阶 JavaScript
# 几个问题
## 为什么说 JavaScript 是适合函数式的编程语言
## JavaScript 语言的多范型开发
## 不可变性和变化的对策
## 理解高阶函数和一等函数
## 闭包和作用域的概念探讨
## 闭包的实际使用
# 为什么要使用 JavaScript
1.  JavaScript 是有史以来应用最为广泛的程序语言之一
2. 尽管 JavaScript 拥有类似 C 语言的语法，其设计灵感有很多则来自像 Lisp 和 Scheme 这样的函数式语言。对高阶函数、闭包、数组字面量以及其他特性的支持，使得 JavaScript 成为一个应用函数式技术的理想平台。并且函数式 JavaScript 中主要的工作单元。
3. JavaScript是一门积极演变与改进的语言
4. JavaScript 既是面对对象的，也是函数式的
# 函数式与面向对象的程序设计
面向对象的核心，就是将创建派生对象作为程序中代码重用的主要手段。但是这使得在原对象中添加更多功能变得很棘手，因为后代不一定会适用于这些新功能。
函数式编程不需要对调用者隐藏数据，通常适用一些更小且非常简单的数据类型。由于一切都是不可变的，对象都是可以直接拿来适用的，而且是通过定义在对象作用域外的函数来实现的。换句话说，数据和行为是松耦合的。

函数式
面向对象
### 组合单元
函数
对象（类）
### 编程风格
声明式
命令式

### 数据和行为
独立且松耦合的纯函数
与方法紧耦合的类

### 状态管理
将对象视为不可变的值
主张通过实例方法改变对象
### 程序流控制
函数与递归
循环与条件
### 线程安全
可并发编程
难以实现
### 封装性
因为一切都是不可变的，所以没有必要
需要保护数据的完整性

# 管理 JavaScript 对象的状态
程序的状态可以定义为在任一时刻存储在所有对象之中的数据快照。
JavaScript 对象是高度动态的，其属性可以在任何时间被修改、增加或删除。
## 将对象视为数值
值对象模式：值其相等性不依赖于标识或引用，而只基于其值，一旦声明，其状态可能不会再改变。
使用函数来保障对象的内部状态访问权限，通过一个对象字面接口来公开一小部分方法给调用者，可以有自己的伪私有变量。
## 深冻结可变部分
JavaScript 的 Object.freeze()函数可以通过将该属性设置为 false 来阻止对象状态的改变。
但是不能用于冻结嵌套对象属性
使用递归来深冻结对象
## 使用 Lenses 定位并修改对象图
Lenses 也被称为函数式引用，是函数式程序设计中用于访问和不可改变地操纵状态数据类型属性的解决方案。
本质与写时复制策略的工作方式类似，即采用一个能够合理管理和赋值状态的内部存储部件。
# 函数
表达式：如返回一个值的函数
语句：如不返回值的函数
命令式编程和过程式编程大多是由一系列有序的语句组成的。
函数式编程完全依赖于表达式，因此无值函数在该范式下并没有意义。
JavaScript 函数的两个支柱性重要特性：一等的和高阶的
